# zMD 2.0 — Feature Roadmap

## Completed in v2.0

### Phase 1: Foundation (Fix Technical Debt) — DONE
- [x] **Unified MarkdownParser** — Single source of truth for parsing (`MarkdownParser.swift`)
- [x] **AlertManager** — User-visible error messages instead of silent failures (`AlertManager.swift`)
- [x] **Outline click-to-scroll** — Clicking headings in sidebar now scrolls to them
- [x] **File change detection** — Detects external edits, offers reload (`FileWatcher.swift`)

### Phase 2: Parser Enhancement — DONE
- [x] **Nested lists** — Indented list items now render with proper nesting (◦, ▪, ▹ bullets)
- [x] **YAML frontmatter** — Displays document metadata from `---` blocks
- [x] **Syntax highlighting** — Code blocks now have language-aware coloring (`SyntaxHighlighter.swift`)
  - Supports: Swift, Python, JavaScript/TypeScript, C/C++, Bash, SQL, JSON, HTML/XML

### Additional Improvements
- [x] **Full text selection** — Replaced SwiftUI Text views with NSTextView (`MarkdownTextView.swift`)
- [x] **Multi-encoding support** — Handles UTF-8, Windows CP1252, ISO Latin-1, Mac Roman
- [x] **Blockquotes** — Parser now supports `>` blockquotes
- [x] **Horizontal rules** — Parser now supports `---`, `***`, `___`
- [x] **Strikethrough** — Parser now supports `~~text~~`
- [x] **Export error feedback** — All export failures now show alerts

---

## Architecture Improvements

| Issue | Solution | Status |
|-------|----------|--------|
| Duplicated markdown parsing | Unified `MarkdownParser` class | Done |
| Silent failures everywhere | `AlertManager` surfaces errors | Done |
| No tests | Add unit tests for parser, export, document management | Pending |
| Re-parsing on every render | NSTextView approach renders once | Done |

---

## Markdown Parser Upgrades

| Priority | Feature | Status |
|----------|---------|--------|
| High | **Blockquotes** (`>`) | Done |
| High | **Nested lists** (indented sub-items) | Done |
| High | **Horizontal rules** (`---`, `***`) | Done |
| Medium | **Strikethrough** (`~~text~~`) | Done |
| Medium | **YAML frontmatter** | Done |
| Medium | **Syntax highlighting** in code blocks | Done |
| Low | Footnotes | Pending |
| Low | Definition lists | Pending |

---

## UI/UX Enhancements

| Feature | Status |
|---------|--------|
| Outline click-to-scroll | Done |
| Text selection (Select All, Copy) | Done |
| Live file watching | Done |
| Multi-window support | Pending |
| Reading position memory | Done |
| Minimap | Pending |
| Split view | Pending |
| Quick Open (⌘Shift+O) | Done |

---

## Search Improvements

- [ ] **Find & Replace** — Currently only find exists
- [ ] **Regex search** — Power user feature
- [ ] **Search result preview** — Show context around matches

---

## Export Enhancements

| Feature | Status |
|---------|--------|
| Error feedback | Done |
| Image embedding in DOCX | Pending |
| Blockquote export | Done |
| Custom CSS for HTML export | Pending |
| Print support (⌘P) | Done |
| Batch export | Pending |

---

## Performance

- [ ] **Virtual scrolling** — For documents with 1000+ elements
- [ ] **Image caching** — Cache remote images
- [ ] **Background parsing** — Parse on background thread for large files
- [ ] **Document size limits/warnings**

---

## New Features to Consider

| Feature | Description | Complexity |
|---------|-------------|------------|
| **Edit mode** | Transform from viewer to full editor | Very High |
| **Folder/workspace view** | Browse folder of markdown files | High |
| **Tags/metadata** | Parse YAML frontmatter | Medium |
| **Backlinks** | Show documents linking to current one | High |
| **Version history** | Git integration | High |
| **iCloud sync** | Sync across Macs | Medium |
| **iOS companion** | Universal app | Very High |

---

## Remaining Phases

### Phase 2: Parser Enhancement — DONE
- [x] Nested lists (indented sub-items)
- [x] YAML frontmatter parsing
- [x] Syntax highlighting for code blocks

### Phase 3: UX Polish — DONE
- [x] Quick Open (⌘Shift+O)
- [x] Reading position memory
- [x] Print support (⌘P)

### Phase 4: Advanced Features
- [ ] Folder/workspace sidebar
- [ ] Split view
- [ ] Multi-window support
